<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Monitoring Dashboard</title>
  <link rel="stylesheet" href="../styles/act5.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="mark"></div>
      <div class="titles">
        <h1>Monitoring Dashboard</h1>
        <div class="muted">Control & Monitoring</div>
      </div>
    </div>
    <div class="meta">
      <div id="runDot" class="dot"></div>
      <div class="muted">Last update: <span id="lastUpdate">—</span></div>
    </div>
  </header>

  <!-- Controls -->
  <section class="ribbon">
    <div class="group">
      <button id="btnToggle" class="btn primary">▶ Play</button>

      <label class="switch">
        <input id="demoToggle" type="checkbox" />
        <span class="slider"></span>
      </label>
      <span class="label">Demo data</span>

      
      <div class="sep"></div>

      <div class="field">
        <label for="rate">Refresh</label>
        <select id="rate">
          <option value="500">0.5 s</option>
          <option value="1000" selected>1 s</option>
          <option value="2000">2 s</option>
          <option value="5000">5 s</option>
        </select>
      </div>

      <div class="field">
        <label for="thSound">Sound alert ≥</label>
        <div class="input">
          <input id="thSound" type="number" min="0" max="150" step="1" value="80" />
          <span class="unit" id="soundUnitLabel">dB</span>
        </div>
      </div>

      <div class="field">
        <label for="thRain">Rain threshold ≥</label>
        <div class="input">
          <input id="thRain" type="number" min="0" max="1" step="0.05" value="0.30" />
          <span class="unit">0–1</span>
        </div>
      </div>

      <!-- Temp / Hum gates inline -->
      <div class="field">
        <label for="thHum">Humidity ≥</label>
        <div class="input">
          <input id="thHum" type="number" min="0" max="100" step="1" value="78" />
          <span class="unit">%</span>
        </div>
      </div>

      <div class="field">
        <label for="thTemp">Temperature ≤</label>
        <div class="input">
          <input id="thTemp" type="number" min="-20" max="60" step="0.5" value="35" />
          <span class="unit">°C</span>
        </div>
      </div>
    </div>
  </section>

  <main class="container">

    <!-- KPIs -->
    <section class="grid kpis">
      <article class="card kpi">
        <header>Sound</header>
        <div class="value"><span id="kSound">—</span><small id="kSoundUnit"> dB</small></div>
        <div class="sub"><span id="kSoundState" class="pill">—</span></div>
      </article>

      <article class="card kpi">
        <header>Rain</header>
        <div class="value"><span id="kRain">—</span><small> intensity</small></div>
        <div class="sub"><span id="rainBadge" class="pill">—</span></div>
      </article>

      <article class="card kpi">
        <header>Temperature</header>
        <div class="value"><span id="kTemp">—</span><small> °C</small></div>
        <div class="sub muted">Peak: <span id="kTempPeak">—</span> °C</div>
      </article>

      <article class="card kpi">
        <header>Humidity</header>
        <div class="value"><span id="kHum">—</span><small> %</small></div>
        <div class="sub muted">Peak: <span id="kHumPeak">—</span> %</div>
      </article>
    </section>

    <!-- ROW 1: Sound — Current | Sound — History -->
    <section class="grid two">
      <article class="card">
        <div class="card-head"><h2>Sound — Current</h2></div>
        <div class="chart-wrap gauge">
          <canvas id="soundGauge" aria-label="Sound gauge"></canvas>
          <div class="gauge-readout">
            <span id="soundNow">--</span><small id="soundUnit"> dB</small>
          </div>
        </div>
      </article>

      <article class="card">
        <div class="card-head">
          <h2>Sound — History</h2>
          <div class="muted">Fixed axis/window</div>
        </div>
        <div class="chart-wrap"><canvas id="soundLine" aria-label="Sound history"></canvas></div>
      </article>
    </section>

    <!-- ROW 2: Rain — Intensity | Environment — Temp & Hum -->
    <section class="grid two">
      <article class="card">
        <div class="card-head">
          <h2>Rain — Intensity</h2>
          <div class="inline-status">
            <span id="rainStatusIcon" class="emoji small-emoji">—</span>
            <span id="rainStatusText" class="status-text small-text">—</span>
            <span class="muted small">| Thr <span id="rainThreshRead">0.30</span> · Hum ≥ <span id="humGateRead">78</span>% · Temp ≤ <span id="tempGateRead">35</span>°C</span>
          </div>
        </div>
        <div class="chart-wrap"><canvas id="rainLine"></canvas></div>
      </article>

      <article class="card">
        <div class="card-head">
          <h2>Environment — Temp & Hum</h2>
          <div class="muted">Peaks in current window</div>
        </div>
        <div class="chart-wrap"><canvas id="envLine"></canvas></div>
      </article>
    </section>

  </main>

  <!-- Background rain effect (auto toggled) -->
  <div id="rainFx" aria-hidden="true"></div>

  <div id="toasts" class="toasts" aria-live="polite"></div>

  <script src="../scripts/act5.js"></script>
</body>
</html>
